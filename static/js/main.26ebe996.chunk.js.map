{"version":3,"sources":["components/Tabs/TabsContext/reducer.ts","components/Tabs/TabsContext/addTabs.ts","components/Tabs/TabsContext/helpers/utils.ts","components/Tabs/TabsContext/changeStarLockStates.ts","components/Tabs/TabsContext/closeDropdownTab.ts","components/Tabs/TabsContext/removeTabs.ts","components/Tabs/TabsContext/TabsContext.tsx","components/Tabs/hooks/useTabsContext.ts","helpers/bem.ts","components/Tabs/Ripple/Ripple.tsx","components/Tabs/Tabs/hooks/useRipple.ts","components/Tabs/Tabs/hooks/useMergeHandlers.ts","components/Tabs/Tabs/TabComponent.tsx","assets/close_24dp.svg","assets/lock_24dp.svg","assets/star_outline_24dp.svg","components/Tabs/DropdownTab/DropdownTabContext/DropdownTabContext.ts","components/Tabs/DropdownTab/DropdownTabContext/useDropdownTabContext.ts","components/Tabs/utils/generateTabId.ts","components/Tabs/DropdownTabMenu/DropdownTabMenu.tsx","components/Tabs/DropdownTabMenu/hooks/useWatchOutsideClick.ts","components/Tabs/utils/getDropdownTabByKey.ts","assets/arrow_drop_down_24dp.svg","components/Tabs/DropdownTab/DropdownTabContext/DropdownTabContextProvider.tsx","components/Tabs/DropdownTab/DropdownTabComponent.tsx","components/Tabs/Slider/Slider.tsx","components/Tabs/Tabs/hooks/useSlider.ts","components/Tabs/Tabs/hooks/useKeyboardNavigation.ts","components/Tabs/Tabs/Tabs.tsx","components/TabsWithContext.tsx","components/Tabs/TabPane/TabContent/TabContent.tsx","components/Tabs/TabPane/TabPane.tsx","components/Tabs/TabPane/TabPanesContaner.tsx","App.tsx","index.tsx"],"names":["ActionType","handleAddTabs","original","tabsToAdd","tabsMapLike","reduce","obj","tab","key","changed","newTabs","map","t","newTab","restTabs","Object","values","length","push","toggleTabProp","state","tabKeys","prop","propValue","keysSet","Set","Array","isArray","isAnyChanged","newSections","sections","section","tabs","has","newValue","reducer","action","type","SetActiveKey","activeKey","payload","CloseTabs","newActiveKey","sectionTabIndex","tabKey","i","tabIndex","findIndex","sectionIndex","getSectionTabIndex","console","error","newIndex","targetDropdownTab","update","$set","$splice","closeDropdownTab","AddTabs","keys","dropdownTabs","updatedState","$apply","prevTabs","modifyingSectionsKeys","forEach","s","delete","size","Error","addTabs","StarTabs","mode","changeTabsStarredState","LockTabs","changeTabsLockedState","RemoveTabs","keysToRemove","updatedTabs","filter","sectionsWillBeChanged","some","updatedSections","sectionTabs","removeTabs","SetState","TabsContext","createContext","TabsContextProvider","defaultActiveKey","initialTabs","initialSections","children","useReducer","dispatch","setActiveKey","useCallback","newActiveTab","onTabClose","lockTabs","unlockTabs","toggleLock","starTabs","unstarTabs","toggleStar","setState","Provider","value","useTabsContext","useContext","withNaming","e","m","v","bemRipple","bem","Ripple","visible","point","rippleRef","useRef","useState","innerSize","setInnerSize","useLayoutEffect","rect","current","getBoundingClientRect","height","width","ref","className","hidden","style","transform","x","y","CSSTransition","in","classNames","timeout","pulsate","useRipple","focused","source","focusInfo","setFocusInfo","pressing","pressingInfo","setIsPressingInfo","showRipple","p","hideRipple","isMousePressed","eventHandlers","onKeyDown","nativeEvent","code","onKeyUp","onMouseDown","f","offsetX","offsetY","onMouseUp","onMouseLeave","onBlur","onFocus","onTouchStart","target","targetTouches","pageX","left","pageY","top","onTouchEnd","isRippleDisplayed","rippleRelatedHandlers","useMergeHandlers","handlers","handler","arguments","bemTab","TabComponent","React","forwardRef","title","active","id","props","role","aria-selected","_extends","assign","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","fill","SvgClose24Dp","_ref","svgRef","titleId","xmlns","viewBox","ForwardRef","opacity","SvgLock24Dp","SvgStarOutline24Dp","DropdownTabContext","useDropdownTabContext","generateTabId","bemMenu","bemMenuItem","bemIcon","DropdownMenuSection","menuItemRef","aria-labelledby","index","DropdownMenuItem","el","disabled","onActivateMenuItem","onMenuItemFocus","focusedTabId","onCloseMenuItem","locked","starred","onFocusCallback","position","onClick","detail","small","aria-label","stopPropagation","DropdownMenu","open","sectionsJSX","useMemo","elements","menuItemsStartIndex","element","aria-hidden","closed","useWatchOutsideClick","useEffect","document","addEventListener","handleClick","removeEventListener","contains","getTabInfoByKey","find","SvgArrowDropDown24Dp","DropdownTabContextProvider","bemTabContainer","bemDropdownTab","SelectedTabInfo","isOpen","sectionTitle","star","lock","DropdownTabComponent","isMenuOpen","setIsMenuOpen","onWidthChange","onChange","defaultKey","placeholder","getDropdownTabByKey","activeTabInfo","setActiveTabInfo","tabInfo","newInfo","isMenuItemActive","prevTabWidth","innerTabRef","closeOutsideClick","clientWidth","onClickProp","restContextValues","onActivateMenuItemWrapped","isInitiatedByKeyboard","fi","contextValueOverridden","dropdown","aria-haspopup","Slider","defaultDiplayInfo","isDisplayed","isEqual","obj1","obj2","useSlider","KeyCode","activeTabKey","tabsRef","displayInfo","setDisplayInfo","targetElement","dropdownTab","parentNode","newDisplayInfo","offsetLeft","sliderDisplayInfo","onDropdownTabWidthChange","prev","node","nextOrFirst","currentIndex","max","prevOrLast","useKeyboardNavigation","setFocusedTabId","onTabFocus","onTabBlur","onDropdownTabFocus","onItemFocus","onKeydown","tabsContainer","container","sort","focusedTabIndex","maxTabIndex","keyCode","tabsInfo","closeMenu","openMenu","menuItems","dropdownItems","maxMenuItemIndex","ArrowLeft","tabElement","focus","ArrowRight","ArrowUp","ArrowDown","Home","Escape","handleDropdownTabKeydown","focusedMenuItemIndex","nextIndex","End","handleDropdownMenuItemKeyDown","focusedIndex","dropdownTabElement","handleKeyDownOnTab","window","DROPDOWN_TAB_KEY","Symbol","TabsComponent","onChangeProp","onDropdownTabClose","activeKeyProp","undefined","activeKeyInner","setActiveKeyInner","isDropdownTabDisplayed","TabsWithContext","Tabs","TabContent","tag","TabContentContainer","bemTabPane","TabPane","aria-controls","memo","bemContainer","TabPanesContainer","classNameInner","flattenTabs","flatten","prevActiveKey","shift","App","join","padding","Buttons","newTabsCounter","isDropdownTab","borderTop","marginTop","s0","rootElement","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.26ebe996.chunk.js","sourcesContent":["import { SetStateAction } from \"react\";\r\n\r\nimport { DropdownTab, Section, Tab, TabKey } from \"../types\";\r\nimport { closeDropdownTab } from \"./closeDropdownTab\";\r\nimport { removeTabs } from \"./removeTabs\";\r\nimport { addTabs } from \"./addTabs\";\r\nimport {\r\n  changeTabsLockedState,\r\n  changeTabsStarredState,\r\n  TabLockAction,\r\n  TabStarAction,\r\n} from \"./changeStarLockStates\";\r\n\r\nexport interface State {\r\n  activeKey: TabKey | null;\r\n  tabs: Tab[];\r\n  sections: Section[];\r\n}\r\n\r\nexport enum ActionType {\r\n  SetActiveKey,\r\n  AddTabs,\r\n  RemoveTabs,\r\n  CloseTabs,\r\n  LockTabs,\r\n  StarTabs,\r\n  SetState,\r\n}\r\n\r\nexport type PayloadType = {\r\n  [ActionType.SetActiveKey]: State[\"activeKey\"];\r\n  [ActionType.CloseTabs]: { key: TabKey; newActiveKey?: TabKey };\r\n  [ActionType.AddTabs]: {\r\n    tabs?: Tab[];\r\n    dropdownTabs?: Record<Section[\"key\"], DropdownTab[]>;\r\n  };\r\n  [ActionType.RemoveTabs]: TabKey | TabKey[];\r\n  [ActionType.LockTabs]: { keys: TabKey | TabKey[]; mode: TabLockAction };\r\n  [ActionType.StarTabs]: { keys: TabKey | TabKey[]; mode: TabStarAction };\r\n  [ActionType.SetState]: SetStateAction<State>;\r\n};\r\n\r\nexport type ReducerAction<T> = T extends keyof PayloadType\r\n  ? { type: T; payload: PayloadType[T] }\r\n  : never;\r\n\r\nexport function reducer(state: State, action: ReducerAction<ActionType>) {\r\n  switch (action.type) {\r\n    case ActionType.SetActiveKey: {\r\n      return { ...state, activeKey: action.payload };\r\n    }\r\n\r\n    case ActionType.CloseTabs: {\r\n      return closeDropdownTab(\r\n        state,\r\n        action.payload.key,\r\n        action.payload.newActiveKey\r\n      );\r\n    }\r\n\r\n    case ActionType.AddTabs: {\r\n      return addTabs(state, action.payload);\r\n    }\r\n\r\n    case ActionType.StarTabs: {\r\n      return changeTabsStarredState(\r\n        state,\r\n        action.payload.keys,\r\n        action.payload.mode\r\n      );\r\n    }\r\n\r\n    case ActionType.LockTabs: {\r\n      return changeTabsLockedState(\r\n        state,\r\n        action.payload.keys,\r\n        action.payload.mode\r\n      );\r\n    }\r\n\r\n    case ActionType.RemoveTabs: {\r\n      return removeTabs(state, action.payload);\r\n    }\r\n\r\n    case ActionType.SetState: {\r\n      return typeof action.payload === \"function\"\r\n        ? action.payload(state)\r\n        : action.payload;\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { tabsToMapLike } from \"./helpers/utils\";\r\nimport { DropdownTab, Section, Tab } from \"../types\";\r\nimport update from \"immutability-helper\";\r\nimport { State } from \"./reducer\";\r\n\r\n/** Replaces matching existing tabs */\r\nexport function addTabs(\r\n  state: State,\r\n  payload: {\r\n    tabs?: Tab[];\r\n    /** Where a key is the section key */\r\n    dropdownTabs?: Record<Section[\"key\"], DropdownTab[]>;\r\n  }\r\n): State {\r\n  if (!Object.keys(payload).length) {\r\n    return state;\r\n  }\r\n\r\n  const { tabs, dropdownTabs } = payload;\r\n\r\n  // handling tabs\r\n  let updatedState = tabs?.length\r\n    ? update(state, {\r\n        tabs: {\r\n          $apply: (prevTabs: Tab[]) => {\r\n            return handleAddTabs(prevTabs, tabs);\r\n          },\r\n        },\r\n      })\r\n    : state;\r\n\r\n  // handle dropdownTabs\r\n\r\n  if (dropdownTabs) {\r\n    const modifyingSectionsKeys = new Set(Object.keys(dropdownTabs));\r\n    updatedState.sections.forEach((s) => modifyingSectionsKeys.delete(s.key));\r\n\r\n    if (modifyingSectionsKeys.size) {\r\n      throw new Error(\"Trying to add dropdown tabs to non-existing section\");\r\n    }\r\n  } else {\r\n    return updatedState;\r\n  }\r\n\r\n  return update(updatedState, {\r\n    sections: {\r\n      $apply: (sections: Section[]) => {\r\n        let changed = false;\r\n        const newSections = sections.map((section) => {\r\n          if (!dropdownTabs[section.key]?.length) {\r\n            return section;\r\n          }\r\n\r\n          const newTabs = handleAddTabs(\r\n            section.tabs,\r\n            dropdownTabs[section.key]\r\n          );\r\n\r\n          if (newTabs !== section.tabs) {\r\n            changed = true;\r\n            return {\r\n              ...section,\r\n              tabs: newTabs,\r\n            };\r\n          }\r\n\r\n          return section;\r\n        });\r\n\r\n        return changed ? newSections : sections;\r\n      },\r\n    },\r\n  });\r\n}\r\n\r\nfunction handleAddTabs<T extends { key: string }>(\r\n  original: T[],\r\n  tabsToAdd: T[]\r\n) {\r\n  const tabsMapLike = tabsToMapLike(tabsToAdd);\r\n  let changed = false;\r\n\r\n  const newTabs = original.map((t) => {\r\n    const newTab = tabsMapLike[t.key];\r\n\r\n    if (newTab) {\r\n      changed = true;\r\n      delete tabsMapLike[t.key];\r\n      return newTab;\r\n    }\r\n\r\n    return t;\r\n  });\r\n\r\n  const restTabs = Object.values(tabsMapLike);\r\n\r\n  if (restTabs.length) {\r\n    changed = true;\r\n    newTabs.push(...restTabs);\r\n  }\r\n\r\n  return changed ? newTabs : original;\r\n}\r\n","import { Section, TabKey } from \"../../types\";\r\n\r\nexport function tabsToMapLike<T extends { key: string }>(\r\n  tabs: T[]\r\n): Record<string, T> {\r\n  return tabs.reduce<Record<string, T>>((obj, tab: T) => {\r\n    obj[tab.key] = tab;\r\n    return obj;\r\n  }, {});\r\n}\r\n\r\nexport function getSectionTabIndex(sections: Section[], tabKey: TabKey) {\r\n  for (let i = 0; i < sections.length; i++) {\r\n    const tabIndex = sections[i].tabs.findIndex((t) => t.key === tabKey);\r\n\r\n    if (tabIndex !== -1) {\r\n      return { sectionIndex: i, tabIndex: tabIndex };\r\n    }\r\n  }\r\n}\r\n","import { DropdownTab, TabKey } from \"../types\";\r\nimport { State } from \"./reducer\";\r\n\r\nexport type TabLockAction = \"lock\" | \"unlock\" | \"toggle\";\r\nexport type TabStarAction = \"star\" | \"unstar\" | \"toggle\";\r\n\r\nexport function changeTabsLockedState(\r\n  state: State,\r\n  tabKeys: TabKey | TabKey[],\r\n  mode: TabLockAction\r\n): State {\r\n  return toggleTabProp(\r\n    state,\r\n    tabKeys,\r\n    \"locked\",\r\n    mode === \"lock\" ? true : mode === \"unlock\" ? false : mode\r\n  );\r\n}\r\n\r\nexport function changeTabsStarredState(\r\n  state: State,\r\n  tabKeys: TabKey | TabKey[],\r\n  mode: TabStarAction\r\n): State {\r\n  return toggleTabProp(\r\n    state,\r\n    tabKeys,\r\n    \"starred\",\r\n    mode === \"star\" ? true : mode === \"unstar\" ? false : mode\r\n  );\r\n}\r\n\r\ntype DropdownTabToggleableProp = keyof Pick<DropdownTab, \"locked\" | \"starred\">;\r\ntype TogglePropValue = true | false | \"toggle\";\r\n\r\nfunction toggleTabProp(\r\n  state: State,\r\n  tabKeys: TabKey | TabKey[],\r\n  prop: DropdownTabToggleableProp,\r\n  propValue: TogglePropValue\r\n): State {\r\n  const keysSet = new Set(Array.isArray(tabKeys) ? tabKeys : [tabKeys]);\r\n\r\n  let isAnyChanged = false;\r\n  const newSections = state.sections.map((section) => {\r\n    let changed = false;\r\n    const newTabs = section.tabs.map((tab) => {\r\n      if (keysSet.has(tab.key)) {\r\n        const newValue = propValue === \"toggle\" ? !tab[prop] : propValue;\r\n\r\n        if (tab[prop] !== newValue) {\r\n          changed = true;\r\n          return {\r\n            ...tab,\r\n            [prop]: newValue,\r\n          };\r\n        }\r\n      }\r\n\r\n      return tab;\r\n    });\r\n\r\n    if (changed) {\r\n      isAnyChanged = true;\r\n      return { ...section, tabs: newTabs };\r\n    }\r\n\r\n    return section;\r\n  });\r\n\r\n  if (isAnyChanged) {\r\n    return {\r\n      ...state,\r\n      sections: newSections,\r\n    };\r\n  }\r\n\r\n  return state;\r\n}\r\n","import { Tab, TabKey } from \"../types\";\r\nimport { getSectionTabIndex } from \"./helpers/utils\";\r\nimport update from \"immutability-helper\";\r\nimport { State } from \"./reducer\";\r\n\r\nexport function closeDropdownTab(\r\n  state: State,\r\n  key: TabKey,\r\n  newActiveKey?: TabKey | null\r\n): State {\r\n  const sectionTabIndex = getSectionTabIndex(state.sections, key);\r\n\r\n  if (!sectionTabIndex) {\r\n    console.error(\"trying to close non-existing tab\");\r\n    return state;\r\n  }\r\n\r\n  const { sectionIndex, tabIndex } = sectionTabIndex;\r\n\r\n  newActiveKey = state.activeKey;\r\n\r\n  // TODO: change the algorithm after introduce disabled tabs (disabled tab cannot be selected)\r\n  if (state.activeKey === key) {\r\n    const section = state.sections[sectionIndex];\r\n\r\n    // set new tab in the same section active\r\n    if (section.tabs.length > 1) {\r\n      const newIndex = tabIndex ? tabIndex - 1 : 1;\r\n      newActiveKey = section.tabs[newIndex].key;\r\n    } else {\r\n      // set the last tab of any of previous sections\r\n      let targetDropdownTab: Tab | null = null;\r\n      for (let i = sectionIndex; i >= 0; i++) {\r\n        const tabs = state.sections[i].tabs;\r\n\r\n        if (tabs.length) {\r\n          targetDropdownTab = tabs[tabs.length - 1];\r\n          break;\r\n        }\r\n      }\r\n\r\n      // or the last tab if there's no precedent dropdownTab\r\n      newActiveKey =\r\n        targetDropdownTab?.key ?? state.tabs.length\r\n          ? state.tabs[state.tabs.length - 1]?.key ?? null\r\n          : null;\r\n    }\r\n  }\r\n\r\n  return update(state, {\r\n    activeKey: {\r\n      $set: newActiveKey,\r\n    },\r\n    sections: {\r\n      [sectionIndex]: {\r\n        tabs: {\r\n          $splice: [[tabIndex, 1]],\r\n        },\r\n      },\r\n    },\r\n  });\r\n}\r\n","import { Section } from \"../types\";\r\nimport { ActionType, State, ReducerAction } from \"./reducer\";\r\n\r\nexport function removeTabs(\r\n  state: State,\r\n  keys: ReducerAction<ActionType.RemoveTabs>[\"payload\"]\r\n): State {\r\n  const keysToRemove = Array.isArray(keys) ? new Set(keys) : new Set([keys]);\r\n\r\n  // handle tabs\r\n  let updatedTabs = state.tabs.filter((t) => !keysToRemove.has(t.key));\r\n  if (updatedTabs.length === state.tabs.length) {\r\n    updatedTabs = state.tabs;\r\n  }\r\n\r\n  // handle dropdown sections\r\n  const sectionsWillBeChanged = state.sections.some((s) =>\r\n    s.tabs.some((t) => keysToRemove.has(t.key))\r\n  );\r\n\r\n  if (updatedTabs === state.tabs && !sectionsWillBeChanged) {\r\n    return state;\r\n  }\r\n\r\n  const updatedSections = state.sections.reduce((sections, section) => {\r\n    let sectionTabs = section.tabs.filter((t) => !keysToRemove.has(t.key));\r\n\r\n    if (sectionTabs.length === section.tabs.length) {\r\n      sections.push(section);\r\n      return sections;\r\n    }\r\n\r\n    sections.push({ ...section, tabs: sectionTabs });\r\n    return sections;\r\n  }, [] as Section[]);\r\n\r\n  return {\r\n    ...state,\r\n    tabs: updatedTabs,\r\n    sections: updatedSections,\r\n  };\r\n}\r\n","import React, {\r\n  useReducer,\r\n  createContext,\r\n  PropsWithChildren,\r\n  useCallback,\r\n} from \"react\";\r\n\r\nimport { reducer, ActionType, PayloadType, State } from \"./reducer\";\r\nimport { TabKey, Tab, Section } from \"../types\";\r\n\r\ntype TabsContextProps = {\r\n  activeKey: TabKey | null;\r\n  setActiveKey: (key: TabKey | null) => void;\r\n  tabs: Tab[];\r\n  sections: Section[];\r\n\r\n  addTabs: (payload: PayloadType[ActionType.AddTabs]) => void;\r\n  removeTabs: (keys: TabKey | TabKey[]) => void;\r\n  closeDropdownTab: (keys: TabKey, newActiveTab?: TabKey) => void;\r\n  onTabClose: (key: TabKey) => void;\r\n\r\n  lockTabs: (keys: TabKey | TabKey[]) => void;\r\n  unlockTabs: (keys: TabKey | TabKey[]) => void;\r\n  toggleLock: (keys: TabKey | TabKey[]) => void;\r\n\r\n  starTabs: (keys: TabKey | TabKey[]) => void;\r\n  unstarTabs: (keys: TabKey | TabKey[]) => void;\r\n  toggleStar: (keys: TabKey | TabKey[]) => void;\r\n\r\n  setState: (state: React.SetStateAction<State>) => void;\r\n};\r\n\r\nconst TabsContext = createContext({} as TabsContextProps);\r\n\r\ntype TabsContextProviderProps = {\r\n  defaultActiveKey?: TabKey | null;\r\n  initialTabs?: Tab[];\r\n  initialSections?: Section[];\r\n};\r\n\r\nconst TabsContextProvider = ({\r\n  defaultActiveKey,\r\n  initialTabs,\r\n  initialSections,\r\n  children,\r\n}: PropsWithChildren<TabsContextProviderProps>) => {\r\n  const [state, dispatch] = useReducer(reducer, {\r\n    activeKey: defaultActiveKey ?? null,\r\n    tabs: initialTabs ?? [],\r\n    sections: initialSections ?? [],\r\n  });\r\n\r\n  const setActiveKey: TabsContextProps[\"setActiveKey\"] = useCallback((key) => {\r\n    dispatch({ type: ActionType.SetActiveKey, payload: key });\r\n  }, []);\r\n\r\n  const addTabs: TabsContextProps[\"addTabs\"] = useCallback((payload) => {\r\n    dispatch({ type: ActionType.AddTabs, payload });\r\n  }, []);\r\n\r\n  const removeTabs: TabsContextProps[\"removeTabs\"] = useCallback((keys) => {\r\n    dispatch({ type: ActionType.RemoveTabs, payload: keys });\r\n  }, []);\r\n\r\n  const closeDropdownTab: TabsContextProps[\"closeDropdownTab\"] = useCallback(\r\n    (key, newActiveTab) => {\r\n      dispatch({\r\n        type: ActionType.CloseTabs,\r\n        payload: { key: key, newActiveKey: newActiveTab },\r\n      });\r\n    },\r\n    []\r\n  );\r\n\r\n  const onTabClose: TabsContextProps[\"onTabClose\"] = useCallback((key) => {\r\n    dispatch({ type: ActionType.RemoveTabs, payload: key });\r\n  }, []);\r\n\r\n  const lockTabs: TabsContextProps[\"lockTabs\"] = useCallback((keys) => {\r\n    dispatch({\r\n      type: ActionType.LockTabs,\r\n      payload: { keys: keys, mode: \"lock\" },\r\n    });\r\n  }, []);\r\n\r\n  const unlockTabs: TabsContextProps[\"unlockTabs\"] = useCallback((keys) => {\r\n    dispatch({\r\n      type: ActionType.LockTabs,\r\n      payload: { keys: keys, mode: \"unlock\" },\r\n    });\r\n  }, []);\r\n\r\n  const toggleLock: TabsContextProps[\"toggleLock\"] = useCallback((keys) => {\r\n    dispatch({\r\n      type: ActionType.LockTabs,\r\n      payload: { keys: keys, mode: \"toggle\" },\r\n    });\r\n  }, []);\r\n\r\n  const starTabs: TabsContextProps[\"starTabs\"] = useCallback((keys) => {\r\n    dispatch({\r\n      type: ActionType.StarTabs,\r\n      payload: { keys: keys, mode: \"star\" },\r\n    });\r\n  }, []);\r\n\r\n  const unstarTabs: TabsContextProps[\"unstarTabs\"] = useCallback((keys) => {\r\n    dispatch({\r\n      type: ActionType.StarTabs,\r\n      payload: { keys: keys, mode: \"unstar\" },\r\n    });\r\n  }, []);\r\n\r\n  const toggleStar: TabsContextProps[\"toggleStar\"] = useCallback((keys) => {\r\n    dispatch({\r\n      type: ActionType.StarTabs,\r\n      payload: { keys: keys, mode: \"toggle\" },\r\n    });\r\n  }, []);\r\n\r\n  const setState: TabsContextProps[\"setState\"] = useCallback((state) => {\r\n    dispatch({ type: ActionType.SetState, payload: state });\r\n  }, []);\r\n\r\n  return (\r\n    <TabsContext.Provider\r\n      value={{\r\n        ...state,\r\n        addTabs,\r\n        removeTabs,\r\n        setActiveKey,\r\n        onTabClose,\r\n        closeDropdownTab,\r\n        lockTabs,\r\n        unlockTabs,\r\n        toggleLock,\r\n        starTabs,\r\n        unstarTabs,\r\n        toggleStar,\r\n        setState,\r\n      }}\r\n    >\r\n      {children}\r\n    </TabsContext.Provider>\r\n  );\r\n};\r\n\r\nexport { TabsContext, TabsContextProvider };\r\n","import { useContext } from \"react\";\r\nimport { TabsContext } from \"../TabsContext/TabsContext\";\r\n\r\nfunction useTabsContext() {\r\n  return useContext(TabsContext);\r\n}\r\n\r\nexport default useTabsContext;\r\n","import { withNaming } from \"@bem-react/classname\";\r\n\r\nexport default withNaming({ e: \"__\", m: \"_\", v: \"_\" });\r\n","import React, { useLayoutEffect, useRef, useState } from \"react\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\n\r\nimport bem from \"../../../helpers/bem\";\r\n\r\nconst bemRipple = bem(\"ripple\");\r\n\r\nexport type RippleProps = {\r\n  visible: boolean;\r\n  point: { x: number; y: number } | null;\r\n  mode: \"focused\" | \"pressing\";\r\n};\r\n\r\nfunction Ripple({ visible, mode, point }: RippleProps) {\r\n  const rippleRef = useRef<HTMLDivElement>(null!);\r\n  const [innerSize, setInnerSize] = useState(0);\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useLayoutEffect(() => {\r\n    const rect = rippleRef.current.getBoundingClientRect();\r\n    setInnerSize(rect.height > rect.width ? rect.height : rect.width);\r\n  });\r\n\r\n  return (\r\n    <div\r\n      ref={rippleRef}\r\n      className={bemRipple({\r\n        hidden: !visible,\r\n      })}\r\n    >\r\n      <div\r\n        className={bemRipple(\"anchor\")}\r\n        style={{\r\n          ...(point && {\r\n            transform: `translateX(${point.x}px) translateY(${point.y}px)`,\r\n          }),\r\n        }}\r\n      >\r\n        <CSSTransition\r\n          in={visible && mode === \"pressing\"}\r\n          classNames=\"ripple\"\r\n          timeout={500}\r\n        >\r\n          <div\r\n            className={bemRipple(\"body\", {\r\n              pulsate: mode === \"focused\",\r\n            })}\r\n            style={{\r\n              width: innerSize,\r\n              height: innerSize,\r\n            }}\r\n          />\r\n        </CSSTransition>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Ripple;\r\n","import { TouchEvent, useCallback, useRef, useState } from \"react\";\r\n\r\ntype Point = {\r\n  x: number;\r\n  y: number;\r\n};\r\n\r\ntype PressingInfo = {\r\n  pressing: boolean;\r\n  point: Point | null;\r\n};\r\n\r\ntype FocusInfo = {\r\n  focused: boolean;\r\n  source: string | null;\r\n};\r\n\r\nfunction useRipple() {\r\n  const [focusInfo, setFocusInfo] = useState<FocusInfo>({\r\n    focused: false,\r\n    source: null,\r\n  });\r\n\r\n  const [pressingInfo, setIsPressingInfo] = useState<PressingInfo>({\r\n    pressing: false,\r\n    point: null,\r\n  });\r\n\r\n  const showRipple = useCallback((p?: Point) => {\r\n    setIsPressingInfo({\r\n      pressing: true,\r\n      point: p || null,\r\n    });\r\n  }, []);\r\n\r\n  const hideRipple = useCallback(() => {\r\n    setIsPressingInfo({\r\n      pressing: false,\r\n      point: null,\r\n    });\r\n  }, []);\r\n\r\n  const isMousePressed = useRef(false);\r\n\r\n  const eventHandlers = {\r\n    onKeyDown: useCallback(\r\n      (e) => {\r\n        switch (e.nativeEvent.code) {\r\n          case \"Enter\":\r\n          case \"Space\":\r\n            showRipple();\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      },\r\n      [showRipple]\r\n    ),\r\n\r\n    onKeyUp: useCallback(\r\n      (e) => {\r\n        switch (e.nativeEvent.code) {\r\n          case \"Enter\":\r\n          case \"Space\":\r\n            hideRipple();\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      },\r\n      [hideRipple]\r\n    ),\r\n\r\n    onMouseDown: useCallback(\r\n      (e) => {\r\n        isMousePressed.current = true;\r\n        setFocusInfo((f) => ({ ...f, source: \"mouse\" }));\r\n        showRipple({\r\n          x: e.nativeEvent.offsetX,\r\n          y: e.nativeEvent.offsetY,\r\n        });\r\n      },\r\n      [showRipple]\r\n    ),\r\n\r\n    onMouseUp: useCallback(() => {\r\n      isMousePressed.current = false;\r\n      hideRipple();\r\n    }, [hideRipple]),\r\n\r\n    onMouseLeave: useCallback(() => {\r\n      isMousePressed.current = false;\r\n      hideRipple();\r\n    }, [hideRipple]),\r\n\r\n    onBlur: useCallback(() => {\r\n      hideRipple();\r\n      setFocusInfo({\r\n        focused: false,\r\n        source: null,\r\n      });\r\n    }, [hideRipple]),\r\n\r\n    onFocus: useCallback((e) => {\r\n      setFocusInfo({\r\n        focused: true,\r\n        source: isMousePressed.current ? \"mouse\" : \"keyboard\",\r\n      });\r\n    }, []),\r\n\r\n    onTouchStart: useCallback(\r\n      (e: TouchEvent<HTMLButtonElement>) => {\r\n        const target = e.target as HTMLButtonElement;\r\n        const rect = target.getBoundingClientRect();\r\n        if (e.targetTouches[0]) {\r\n          const x = e.targetTouches[0].pageX - rect.left;\r\n          const y = e.targetTouches[0].pageY - rect.top;\r\n          isMousePressed.current = true;\r\n          setFocusInfo((f) => ({ ...f, source: \"mouse\" }));\r\n          showRipple({\r\n            x,\r\n            y,\r\n          });\r\n        }\r\n      },\r\n      [showRipple]\r\n    ),\r\n\r\n    onTouchEnd: useCallback(() => {\r\n      isMousePressed.current = false;\r\n      hideRipple();\r\n    }, [hideRipple]),\r\n  };\r\n\r\n  const isRippleDisplayed =\r\n    pressingInfo.pressing ||\r\n    (focusInfo.focused && focusInfo.source === \"keyboard\");\r\n\r\n  return {\r\n    isRippleDisplayed,\r\n    pressingInfo,\r\n    rippleRelatedHandlers: eventHandlers,\r\n    setFocusInfo,\r\n  };\r\n}\r\n\r\nexport default useRipple;\r\n","import { useCallback } from \"react\";\r\n\r\nfunction useMergeHandlers<T extends Function>(...handlers: (T | undefined)[]) {\r\n  return useCallback(function () {\r\n    for (const handler of handlers) {\r\n      handler?.(...arguments);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, handlers);\r\n}\r\n\r\nexport default useMergeHandlers;\r\n","import React from \"react\";\r\nimport bem from \"../../../helpers/bem\";\r\nimport { Tab } from \"../types\";\r\nimport Ripple from \"../Ripple/Ripple\";\r\nimport useRipple from \"./hooks/useRipple\";\r\nimport useMergeHandlers from \"./hooks/useMergeHandlers\";\r\n\r\nconst bemTab = bem(\"tab\");\r\n\r\nexport type TabProps = Omit<React.ComponentPropsWithRef<\"button\">, \"title\"> & {\r\n  title: Tab[\"title\"];\r\n  active: boolean;\r\n  id: Tab[\"key\"];\r\n};\r\n\r\nconst TabComponent = React.forwardRef<HTMLButtonElement, TabProps>(\r\n  function TabComponent({ title, active, id, ...props }, ref) {\r\n    const {\r\n      isRippleDisplayed,\r\n      rippleRelatedHandlers,\r\n      pressingInfo,\r\n    } = useRipple();\r\n\r\n    return (\r\n      <button\r\n        tabIndex={active ? 0 : -1}\r\n        ref={ref}\r\n        className={bemTab({ active: active })}\r\n        role=\"tab\"\r\n        aria-selected={active}\r\n        id={id}\r\n        {...props}\r\n        onFocus={useMergeHandlers(rippleRelatedHandlers.onFocus, props.onFocus)}\r\n        onBlur={useMergeHandlers(rippleRelatedHandlers.onBlur, props.onBlur)}\r\n        onMouseDown={useMergeHandlers(\r\n          rippleRelatedHandlers.onMouseDown,\r\n          props.onMouseDown\r\n        )}\r\n        onMouseUp={useMergeHandlers(\r\n          rippleRelatedHandlers.onMouseUp,\r\n          props.onMouseUp\r\n        )}\r\n        onTouchStart={useMergeHandlers(\r\n          rippleRelatedHandlers.onTouchStart,\r\n          props.onTouchStart\r\n        )}\r\n        onTouchEnd={useMergeHandlers(\r\n          rippleRelatedHandlers.onTouchEnd,\r\n          props.onTouchEnd\r\n        )}\r\n        onKeyDown={useMergeHandlers(\r\n          rippleRelatedHandlers.onKeyDown,\r\n          props.onKeyDown\r\n        )}\r\n        onKeyUp={useMergeHandlers(rippleRelatedHandlers.onKeyUp, props.onKeyUp)}\r\n      >\r\n        <Ripple\r\n          visible={isRippleDisplayed}\r\n          point={pressingInfo.point}\r\n          mode={pressingInfo.pressing ? \"pressing\" : \"focused\"}\r\n        />\r\n        <span className={bemTab(\"title\")}>{title}</span>\r\n      </button>\r\n    );\r\n  }\r\n);\r\n\r\nexport default TabComponent;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\"\n});\n\nfunction SvgClose24Dp(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    width: \"24px\",\n    fill: \"currentColor\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose24Dp);\nexport default __webpack_public_path__ + \"static/media/close_24dp.60bd688e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0V0z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  opacity: 0.87\n}));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z\"\n});\n\nfunction SvgLock24Dp(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    width: \"24px\",\n    fill: \"currentColor\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLock24Dp);\nexport default __webpack_public_path__ + \"static/media/lock_24dp.03e3f8a0.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"\n});\n\nfunction SvgStarOutline24Dp(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    width: \"24px\",\n    fill: \"currentColor\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgStarOutline24Dp);\nexport default __webpack_public_path__ + \"static/media/star_outline_24dp.e592165f.svg\";\nexport { ForwardRef as ReactComponent };","import { createContext, FocusEvent } from \"react\";\r\nimport { Tab, TabKey } from \"../../types\";\r\n\r\nexport type DropdownTabContextValue = {\r\n  menuItemRef: (el: HTMLButtonElement | null, tab: Tab, index: number) => void;\r\n  onMenuItemFocus: (tab: Tab, e: FocusEvent<HTMLButtonElement>) => void;\r\n  focusedTabId: TabKey | null | Symbol;\r\n  onActivateMenuItem: (\r\n    key: Required<TabKey>,\r\n    isInitiatedByKeyboard?: boolean\r\n  ) => void;\r\n  onCloseMenuItem: (key: Required<TabKey>) => void;\r\n};\r\n\r\nexport const DropdownTabContext = createContext<DropdownTabContextValue>(\r\n  {} as DropdownTabContextValue\r\n);\r\n","import { useContext } from \"react\";\r\nimport { DropdownTabContext } from \"./DropdownTabContext\";\r\n\r\nfunction useDropdownTabContext() {\r\n  return useContext(DropdownTabContext);\r\n}\r\n\r\nexport default useDropdownTabContext;\r\n","import { Tab } from \"../types\";\r\n\r\nfunction generateTabId(tab: Tab) {\r\n  return `tab-${tab.key}`;\r\n}\r\n\r\nexport default generateTabId;\r\n","import React, { FocusEventHandler, useCallback, useMemo } from \"react\";\r\nimport bem from \"../../../helpers/bem\";\r\nimport { DropdownTab, Section, Tab, TabKey } from \"../types\";\r\nimport { ReactComponent as CloseIcon } from \"../../../assets/close_24dp.svg\";\r\nimport { ReactComponent as LockIcon } from \"../../../assets/lock_24dp.svg\";\r\nimport { ReactComponent as StarIcon } from \"../../../assets/star_outline_24dp.svg\";\r\nimport useDropdownTabContext from \"../DropdownTab/DropdownTabContext/useDropdownTabContext\";\r\nimport useRipple from \"../Tabs/hooks/useRipple\";\r\nimport Ripple from \"../Ripple/Ripple\";\r\nimport useMergeHandlers from \"../Tabs/hooks/useMergeHandlers\";\r\nimport generateTabId from \"../utils/generateTabId\";\r\n\r\nconst bemMenu = bem(\"dropdown-menu\");\r\nconst bemMenuItem = bem(\"dropdown-menu-item\");\r\nconst bemIcon = bem(\"icon\");\r\n\r\nexport type DropdownMenuProps = {\r\n  open: boolean;\r\n  sections: Section[];\r\n  activeKey: TabKey | null;\r\n};\r\n\r\nexport function DropdownMenu({ open, sections, activeKey }: DropdownMenuProps) {\r\n  const { menuItemRef } = useDropdownTabContext();\r\n\r\n  const sectionsJSX = useMemo(() => {\r\n    const [elements] = sections.reduce<[React.ReactNode[], number]>(\r\n      ([elements, menuItemsStartIndex], section, i) => {\r\n        elements.push(\r\n          !!section.tabs?.length && (\r\n            <DropdownMenuSection\r\n              id={`tabs-section-${section.key}`}\r\n              key={section.key}\r\n              tabs={section.tabs}\r\n              title={section.title}\r\n              activeKey={activeKey}\r\n              menuItemRef={(element, tab, index) => {\r\n                menuItemRef(element, tab, menuItemsStartIndex + index);\r\n              }}\r\n            />\r\n          )\r\n        );\r\n\r\n        return [elements, menuItemsStartIndex + section.tabs.length];\r\n      },\r\n      [[], 0]\r\n    );\r\n\r\n    return elements;\r\n  }, [sections, activeKey, menuItemRef]);\r\n\r\n  return (\r\n    <div\r\n      role=\"presentation\"\r\n      aria-hidden={!open}\r\n      className={bemMenu({ closed: !open })}\r\n      onClick={(e) => e.stopPropagation()}\r\n      onMouseDown={(e) => e.stopPropagation()}\r\n      onKeyDown={(e) => {\r\n        switch (e.nativeEvent.code) {\r\n          case \"Enter\":\r\n          case \"Space\":\r\n            e.stopPropagation();\r\n        }\r\n      }}\r\n    >\r\n      {sectionsJSX}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport type DropdownMenuSectionProps = {\r\n  title: Section[\"title\"];\r\n  id: string;\r\n  tabs: DropdownTab[];\r\n  activeKey: TabKey | null;\r\n  menuItemRef: (element: HTMLButtonElement, tab: Tab, index: number) => void;\r\n};\r\n\r\nfunction DropdownMenuSection({\r\n  id,\r\n  title,\r\n  tabs,\r\n  activeKey,\r\n  menuItemRef,\r\n}: DropdownMenuSectionProps) {\r\n  return (\r\n    <>\r\n      <div className={bemMenu(\"section-title\")}>\r\n        <span className={\"text-truncate\"} id={id}>\r\n          {title}\r\n        </span>\r\n      </div>\r\n      <ul\r\n        role=\"presentation\"\r\n        aria-labelledby={id}\r\n        className={bemMenu(\"section\")}\r\n      >\r\n        {tabs?.map((tab, index) => (\r\n          <DropdownMenuItem\r\n            menuItemRef={(el) => menuItemRef(el!, tab, index)}\r\n            key={tab.key}\r\n            tab={tab}\r\n            active={activeKey === tab.key}\r\n          />\r\n        ))}\r\n      </ul>\r\n    </>\r\n  );\r\n}\r\n\r\nexport type DropdownMenuItemProps = {\r\n  tab: DropdownTab;\r\n  disabled?: boolean;\r\n  active: boolean;\r\n  menuItemRef: (el: HTMLButtonElement | null) => void;\r\n};\r\n\r\nfunction DropdownMenuItem({\r\n  tab,\r\n  active,\r\n  disabled,\r\n  menuItemRef,\r\n}: DropdownMenuItemProps) {\r\n  const {\r\n    onActivateMenuItem,\r\n    onMenuItemFocus,\r\n    focusedTabId,\r\n    onCloseMenuItem,\r\n  } = useDropdownTabContext();\r\n\r\n  const { locked, starred, title } = tab;\r\n\r\n  const {\r\n    isRippleDisplayed,\r\n    rippleRelatedHandlers,\r\n    pressingInfo,\r\n  } = useRipple();\r\n\r\n  const onFocusCallback: FocusEventHandler<HTMLButtonElement> = useCallback(\r\n    (e) => {\r\n      onMenuItemFocus(tab, e);\r\n    },\r\n    [onMenuItemFocus, tab]\r\n  );\r\n\r\n  const onFocus = useMergeHandlers(\r\n    onFocusCallback,\r\n    rippleRelatedHandlers.onFocus\r\n  );\r\n\r\n  const tabIndex = tab.key === focusedTabId ? 0 : -1;\r\n  return (\r\n    <li role=\"presentation\" style={{ position: \"relative\" }}>\r\n      <button\r\n        role=\"tab\"\r\n        aria-selected={active}\r\n        id={generateTabId(tab)}\r\n        ref={(el) => menuItemRef((el as unknown) as HTMLButtonElement)}\r\n        className={bemMenuItem(\"tab\", {\r\n          active: active,\r\n          locked: locked,\r\n          disabled: disabled,\r\n        })}\r\n        tabIndex={tabIndex}\r\n        disabled={disabled}\r\n        onClick={(e) => {\r\n          onActivateMenuItem(tab.key, e.detail === 0);\r\n        }}\r\n        {...rippleRelatedHandlers}\r\n        onFocus={onFocus}\r\n      >\r\n        <Ripple\r\n          visible={isRippleDisplayed}\r\n          point={pressingInfo.point}\r\n          mode={pressingInfo.pressing ? \"pressing\" : \"focused\"}\r\n        />\r\n\r\n        {starred && (\r\n          <StarIcon\r\n            className={bemIcon({ small: true }, [bemMenuItem(\"star-icon\")])}\r\n          />\r\n        )}\r\n\r\n        {locked && (\r\n          <LockIcon\r\n            className={bemIcon({ small: true }, [bemMenuItem(\"lock-icon\")])}\r\n          />\r\n        )}\r\n\r\n        <span className={bemMenuItem(\"title\", [\"text-truncate\"])}>{title}</span>\r\n      </button>\r\n      {!locked && (\r\n        <div className={bemMenuItem(\"close-button-wrapper\")}>\r\n          <button\r\n            aria-label={`close ${tab.title} tab`}\r\n            className={bemMenuItem(\"close-button\")}\r\n            tabIndex={tabIndex}\r\n            onFocus={(e) => e.stopPropagation()}\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              onCloseMenuItem(tab.key);\r\n            }}\r\n          >\r\n            <CloseIcon className={bemIcon({ small: true })} />\r\n          </button>\r\n        </div>\r\n      )}\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default DropdownMenu;\r\n","import { MutableRefObject, useEffect } from \"react\";\r\n\r\nfunction useWatchOutsideClick(\r\n  ref: MutableRefObject<HTMLElement | null>,\r\n  handler: (e: MouseEvent) => void\r\n): void {\r\n  useEffect(() => {\r\n    if (!ref.current) {\r\n      return;\r\n    }\r\n\r\n    function handleClick(e: MouseEvent) {\r\n      if (!ref.current?.contains(e.target as Node)) {\r\n        handler(e);\r\n      }\r\n    }\r\n\r\n    document.addEventListener(\"mousedown\", handleClick);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClick);\r\n    };\r\n  }, [ref, handler]);\r\n}\r\n\r\nexport default useWatchOutsideClick;\r\n","import { DropdownTab, Section, TabKey } from \"../types\";\r\n\r\nfunction getTabInfoByKey(key: TabKey | null | undefined, sections: Section[]) {\r\n  let target: DropdownTab | null = null;\r\n  let section: Section | null = null;\r\n\r\n  for (let i = 0; !target && i < sections?.length; i++) {\r\n    target = sections[i].tabs?.find((t) => t.key === key) ?? null;\r\n    section = target ? sections[i] : null;\r\n  }\r\n\r\n  return { tab: target, section: section };\r\n}\r\n\r\nexport default getTabInfoByKey;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0V0z\",\n  fill: \"none\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7 10l5 5 5-5H7z\"\n});\n\nfunction SvgArrowDropDown24Dp(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    width: \"24px\",\n    fill: \"currentColor\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgArrowDropDown24Dp);\nexport default __webpack_public_path__ + \"static/media/arrow_drop_down_24dp.25d163c7.svg\";\nexport { ForwardRef as ReactComponent };","import { PropsWithChildren, useMemo } from \"react\";\r\nimport {\r\n  DropdownTabContext,\r\n  DropdownTabContextValue,\r\n} from \"./DropdownTabContext\";\r\n\r\nexport function DropdownTabContextProvider({\r\n  children,\r\n  ...props\r\n}: PropsWithChildren<DropdownTabContextValue>) {\r\n  return (\r\n    <DropdownTabContext.Provider\r\n      value={useMemo<DropdownTabContextValue>(() => {\r\n        return props;\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n      }, Object.values(props))}\r\n      children={children}\r\n    />\r\n  );\r\n}\r\n","import React, {\r\n  useCallback,\r\n  useEffect,\r\n  useLayoutEffect,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport DropdownMenu from \"../DropdownTabMenu/DropdownTabMenu\";\r\nimport bem from \"../../../helpers/bem\";\r\nimport { DropdownTab, Section, TabKey } from \"../types\";\r\nimport useWatchOutsideClick from \"../DropdownTabMenu/hooks/useWatchOutsideClick\";\r\nimport getDropdownTabByKey from \"../utils/getDropdownTabByKey\";\r\nimport { ReactComponent as DropdownIcon } from \"../../../assets/arrow_drop_down_24dp.svg\";\r\nimport Ripple from \"../Ripple/Ripple\";\r\nimport useRipple from \"../Tabs/hooks/useRipple\";\r\nimport useMergeHandlers from \"../Tabs/hooks/useMergeHandlers\";\r\nimport useDropdownTabContext from \"./DropdownTabContext/useDropdownTabContext\";\r\nimport { DropdownTabContextValue } from \"./DropdownTabContext/DropdownTabContext\";\r\nimport { DropdownTabContextProvider } from \"./DropdownTabContext/DropdownTabContextProvider\";\r\n\r\nconst bemTabContainer = bem(\"dropdown-tab-container\");\r\nconst bemDropdownTab = bem(\"dropdown-tab\");\r\nconst bemTab = bem(\"tab\");\r\n\r\nexport type DropdownTabProps = Omit<\r\n  React.ComponentPropsWithRef<\"button\">,\r\n  \"onChange\"\r\n> & {\r\n  onChange: (key: TabKey) => void;\r\n  sections: Section[];\r\n  activeKey: TabKey | null;\r\n  defaultKey?: TabKey;\r\n  placeholder?: React.ReactNode;\r\n  onWidthChange: (width: number) => void;\r\n  isMenuOpen: boolean;\r\n  setIsMenuOpen: React.Dispatch<React.SetStateAction<boolean>>;\r\n};\r\n\r\nconst DropdownTabComponent = React.forwardRef<\r\n  HTMLButtonElement,\r\n  DropdownTabProps\r\n>(function DropdownTabComponent(\r\n  {\r\n    isMenuOpen,\r\n    setIsMenuOpen,\r\n    onWidthChange,\r\n    onChange,\r\n    sections,\r\n    activeKey,\r\n    defaultKey,\r\n    placeholder = \"ACTIVE TABS\",\r\n    ...props\r\n  },\r\n  ref\r\n) {\r\n  const [activeTabInfo, setActiveTabInfo] = useState(() => {\r\n    return getDropdownTabByKey(\r\n      activeKey !== null ? activeKey : defaultKey,\r\n      sections\r\n    );\r\n  });\r\n\r\n  useEffect(() => {\r\n    setActiveTabInfo((tabInfo) => {\r\n      let newInfo = getDropdownTabByKey(activeKey, sections);\r\n\r\n      if (!newInfo.tab) {\r\n        newInfo = getDropdownTabByKey(tabInfo.tab?.key, sections);\r\n      }\r\n\r\n      if (newInfo.tab !== tabInfo.tab || newInfo.section !== tabInfo.section) {\r\n        return newInfo;\r\n      }\r\n\r\n      return tabInfo;\r\n    });\r\n  }, [sections, activeKey]);\r\n\r\n  const isMenuItemActive = activeTabInfo.tab?.key === activeKey;\r\n\r\n  useEffect(() => {\r\n    if (!isMenuItemActive) {\r\n      setIsMenuOpen(false);\r\n    }\r\n  }, [isMenuItemActive, setIsMenuOpen]);\r\n\r\n  const prevTabWidth = useRef<number | null>(null);\r\n  const innerTabRef = useRef<HTMLButtonElement>(null!);\r\n\r\n  const closeOutsideClick = useCallback(() => {\r\n    setIsMenuOpen(false);\r\n  }, [setIsMenuOpen]);\r\n\r\n  useWatchOutsideClick(innerTabRef, closeOutsideClick);\r\n\r\n  useLayoutEffect(() => {\r\n    const width = innerTabRef.current.clientWidth ?? 0;\r\n    if (prevTabWidth.current !== width) {\r\n      prevTabWidth.current = width;\r\n      onWidthChange?.(width);\r\n    }\r\n  });\r\n\r\n  const title = activeTabInfo.tab?.title;\r\n  const sectionTitle = activeTabInfo.section?.title;\r\n  const starred = activeTabInfo.tab?.starred;\r\n  const locked = activeTabInfo.tab?.locked;\r\n\r\n  const onClickProp = props.onClick;\r\n  const onClick = useCallback(\r\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n      setIsMenuOpen((open) => {\r\n        if (open) {\r\n          return false;\r\n        }\r\n\r\n        if (isMenuItemActive) {\r\n          return !open;\r\n        }\r\n\r\n        return !activeTabInfo.tab;\r\n      });\r\n\r\n      if (activeTabInfo.tab) {\r\n        onChange(activeTabInfo.tab.key);\r\n      }\r\n\r\n      onClickProp?.(e);\r\n    },\r\n    [setIsMenuOpen, activeTabInfo.tab, isMenuItemActive, onChange, onClickProp]\r\n  );\r\n\r\n  const {\r\n    isRippleDisplayed,\r\n    rippleRelatedHandlers,\r\n    pressingInfo,\r\n    setFocusInfo,\r\n  } = useRipple();\r\n\r\n  const { onActivateMenuItem, ...restContextValues } = useDropdownTabContext();\r\n  const onActivateMenuItemWrapped = useCallback<\r\n    DropdownTabContextValue[\"onActivateMenuItem\"]\r\n  >(\r\n    (tabKey, isInitiatedByKeyboard) => {\r\n      onActivateMenuItem(tabKey, isInitiatedByKeyboard);\r\n\r\n      // if menu item is activated via click then hide ripple\r\n      if (!isInitiatedByKeyboard) {\r\n        setFocusInfo((fi) => ({\r\n          ...fi,\r\n          focused: false,\r\n        }));\r\n      }\r\n    },\r\n    [onActivateMenuItem, setFocusInfo]\r\n  );\r\n\r\n  const contextValueOverridden: DropdownTabContextValue = {\r\n    ...restContextValues,\r\n    onActivateMenuItem: onActivateMenuItemWrapped,\r\n  };\r\n\r\n  return (\r\n    <div className={bemTabContainer()}>\r\n      <button\r\n        tabIndex={isMenuItemActive ? 0 : -1}\r\n        className={bemTab({ active: isMenuItemActive, dropdown: true })}\r\n        ref={(el) => {\r\n          if (ref) {\r\n            if (typeof ref === \"function\") {\r\n              ref(el);\r\n            } else {\r\n              ref.current = el;\r\n            }\r\n          }\r\n\r\n          innerTabRef.current = el as HTMLButtonElement;\r\n        }}\r\n        aria-haspopup={true}\r\n        {...props}\r\n        onTouchStart={useMergeHandlers(\r\n          rippleRelatedHandlers.onTouchStart,\r\n          props.onTouchStart\r\n        )}\r\n        onTouchEnd={useMergeHandlers(\r\n          rippleRelatedHandlers.onTouchEnd,\r\n          props.onTouchEnd\r\n        )}\r\n        onMouseDown={useMergeHandlers(\r\n          rippleRelatedHandlers.onMouseDown,\r\n          props.onMouseDown\r\n        )}\r\n        onMouseUp={useMergeHandlers(\r\n          rippleRelatedHandlers.onMouseUp,\r\n          props.onMouseUp\r\n        )}\r\n        onKeyDown={useMergeHandlers(\r\n          rippleRelatedHandlers.onKeyDown,\r\n          props.onKeyDown\r\n        )}\r\n        onKeyUp={useMergeHandlers(rippleRelatedHandlers.onKeyUp, props.onKeyUp)}\r\n        onFocus={useMergeHandlers(rippleRelatedHandlers.onFocus, props.onFocus)}\r\n        onBlur={useMergeHandlers(rippleRelatedHandlers.onBlur, props.onBlur)}\r\n        onClick={onClick}\r\n      >\r\n        <Ripple\r\n          visible={isRippleDisplayed}\r\n          point={pressingInfo.point}\r\n          mode={pressingInfo.pressing ? \"pressing\" : \"focused\"}\r\n        />\r\n\r\n        {activeTabInfo.tab && (\r\n          <SelectedTabInfo\r\n            isOpen={isMenuOpen}\r\n            sectionTitle={sectionTitle}\r\n            title={title}\r\n            starred={starred}\r\n            locked={locked}\r\n          />\r\n        )}\r\n\r\n        {!activeTabInfo.tab && placeholder}\r\n      </button>\r\n      <DropdownTabContextProvider {...contextValueOverridden}>\r\n        <DropdownMenu\r\n          open={isMenuOpen}\r\n          sections={sections}\r\n          activeKey={activeKey}\r\n        />\r\n      </DropdownTabContextProvider>\r\n    </div>\r\n  );\r\n});\r\n\r\ntype SelectedTabInfoProps = {\r\n  isOpen: boolean;\r\n  sectionTitle: Section[\"title\"];\r\n  title: DropdownTab[\"title\"];\r\n  starred: DropdownTab[\"starred\"];\r\n  locked: DropdownTab[\"locked\"];\r\n};\r\n\r\nfunction SelectedTabInfo({\r\n  isOpen,\r\n  sectionTitle,\r\n  title,\r\n  starred,\r\n  locked,\r\n}: SelectedTabInfoProps) {\r\n  return (\r\n    <div className={bemDropdownTab()}>\r\n      <span className={bemDropdownTab(\"section-title\", [\"text-truncate\"])}>\r\n        {sectionTitle}\r\n      </span>\r\n      <span className={bemDropdownTab(\"title\", [\"text-truncate\"])}>\r\n        {title}\r\n      </span>\r\n      {starred && (\r\n        <span className={bemDropdownTab(\"indicator\", { star: true })} />\r\n      )}\r\n      {locked && (\r\n        <span className={bemDropdownTab(\"indicator\", { lock: true })} />\r\n      )}\r\n      <DropdownIcon\r\n        className={bemDropdownTab(\"dropdown-icon\", { open: isOpen })}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DropdownTabComponent;\r\n","import React from \"react\";\r\n\r\nexport type SliderProps = {\r\n  left: number;\r\n  width: number;\r\n};\r\n\r\nfunction Slider({ left, width }: SliderProps) {\r\n  return <div className=\"tabs-slider\" style={{ left, width }} />;\r\n}\r\n\r\nexport default Slider;\r\n","import getDropdownTabByKey from \"../../utils/getDropdownTabByKey\";\nimport { Section, Tab, TabKey, TabsRef } from \"../../types\";\nimport {\n  useCallback,\n  useLayoutEffect,\n  useState,\n  MutableRefObject,\n} from \"react\";\n\nexport type SliderRenderingInfo = {\n  tabsElements: Record<Tab[\"key\"], HTMLButtonElement | null>;\n  dropdownTabElement: HTMLButtonElement | null;\n};\n\nexport type SlideDisplayInfo = {\n  isDisplayed: boolean;\n  width: number;\n  left: number;\n};\n\nconst defaultDiplayInfo: SlideDisplayInfo = {\n  isDisplayed: false,\n  width: 0,\n  left: 0,\n};\n\nfunction useSlider(\n  activeTabKey: TabKey | null,\n  sections: Section[],\n  tabsRef: MutableRefObject<TabsRef>\n) {\n  const [displayInfo, setDisplayInfo] = useState<SlideDisplayInfo>({\n    isDisplayed: false,\n    width: 0,\n    left: 0,\n  });\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useLayoutEffect(() => {\n    if (activeTabKey == null) {\n      setDisplayInfo((d) =>\n        isEqual(d, defaultDiplayInfo) ? d : defaultDiplayInfo\n      );\n      return;\n    }\n\n    let targetElement: HTMLElement | null =\n      Object.values(tabsRef.current.tabs).find(\n        (t) => t.tab.key === activeTabKey\n      )?.element ?? null;\n\n    if (!targetElement) {\n      const isDropdownTab = !!getDropdownTabByKey(activeTabKey, sections)?.tab;\n      targetElement = isDropdownTab\n        ? (tabsRef.current.dropdownTab.element?.parentNode as HTMLElement)\n        : null;\n    }\n\n    const newDisplayInfo: SlideDisplayInfo = {\n      isDisplayed: !!targetElement,\n      width: targetElement?.getBoundingClientRect().width ?? 0,\n      left: targetElement?.offsetLeft ?? 0,\n    };\n\n    setDisplayInfo((d) => (isEqual(d, newDisplayInfo) ? d : newDisplayInfo));\n  });\n\n  const onDropdownTabWidthChange = useCallback(() => {\n    setDisplayInfo((prev) => {\n      const node = tabsRef.current.dropdownTab.element;\n      return {\n        ...prev,\n        width: node?.getBoundingClientRect().width ?? 0,\n        left: node?.offsetLeft ?? 0,\n      };\n    });\n  }, [tabsRef]);\n\n  return {\n    sliderDisplayInfo: displayInfo,\n    onDropdownTabWidthChange: onDropdownTabWidthChange,\n  };\n}\n\nfunction isEqual(obj1: SlideDisplayInfo, obj2: SlideDisplayInfo) {\n  return (\n    obj1.isDisplayed === obj2.isDisplayed &&\n    obj1.left === obj2.left &&\n    obj1.width === obj2.width\n  );\n}\nexport default useSlider;\n","import React, { useCallback, useEffect, useState, useMemo } from \"react\";\r\nimport { Tab, TabKey, TabsRef } from \"../../types\";\r\n\r\nenum KeyCode {\r\n  ArrowLeft = \"ArrowLeft\",\r\n  ArrowRight = \"ArrowRight\",\r\n  ArrowDown = \"ArrowDown\",\r\n  ArrowUp = \"ArrowUp\",\r\n  Escape = \"Escape\",\r\n  Home = \"Home\",\r\n  End = \"End\",\r\n}\r\n\r\ntype Handlers = {\r\n  onTabFocus: (tab: Tab, e?: React.FocusEvent) => void;\r\n  onTabBlur: (e?: React.FocusEvent) => void;\r\n  onDropdownTabFocus: (id: Symbol, e?: React.FocusEvent) => void;\r\n  onItemFocus: (tab: Tab, e: React.FocusEvent) => void;\r\n};\r\n\r\nfunction nextOrFirst(currentIndex: number, max: number) {\r\n  return currentIndex === max ? 0 : currentIndex + 1;\r\n}\r\n\r\nfunction prevOrLast(currentIndex: number, max: number) {\r\n  return currentIndex === 0 ? max : currentIndex - 1;\r\n}\r\n\r\nfunction useKeyboardNavigation({\r\n  tabsRef,\r\n  isMenuOpen,\r\n  setIsMenuOpen,\r\n}: {\r\n  tabsRef: React.MutableRefObject<TabsRef>;\r\n  isMenuOpen: boolean;\r\n  setIsMenuOpen: React.Dispatch<React.SetStateAction<boolean>>;\r\n}) {\r\n  const [focusedTabId, setFocusedTabId] = useState<TabKey | null | Symbol>(\r\n    null\r\n  );\r\n\r\n  const handlers: Handlers = {\r\n    onTabFocus: (tab) => {\r\n      setFocusedTabId(tab.key);\r\n    },\r\n    onTabBlur: () => {\r\n      setFocusedTabId(null);\r\n    },\r\n    onDropdownTabFocus: (id) => {\r\n      setFocusedTabId(id);\r\n    },\r\n    onItemFocus: (tab, e) => {\r\n      e?.stopPropagation();\r\n      setFocusedTabId(tab.key);\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    const onKeydown = (e: KeyboardEvent) => {\r\n      const tabsContainer = tabsRef.current.container;\r\n\r\n      if (!tabsContainer?.contains(e.target as Node)) {\r\n        return;\r\n      }\r\n\r\n      const tabKeys = Object.keys(tabsRef.current?.tabs ?? {}).sort();\r\n      const focusedTabIndex = tabKeys.findIndex(\r\n        (key) => tabsRef.current?.tabs[+key].tab.key === focusedTabId\r\n      );\r\n      const maxTabIndex = tabKeys.length - 1;\r\n\r\n      if (focusedTabIndex !== -1) {\r\n        handleKeyDownOnTab(\r\n          e.code as KeyCode,\r\n          focusedTabIndex,\r\n          maxTabIndex,\r\n          tabsRef.current\r\n        );\r\n        return;\r\n      }\r\n\r\n      const isDropdownTabFocused =\r\n        focusedTabId === tabsRef.current.dropdownTab.id;\r\n\r\n      if (isDropdownTabFocused) {\r\n        handleDropdownTabKeydown(\r\n          e.code as KeyCode,\r\n          maxTabIndex,\r\n          tabsRef.current,\r\n          {\r\n            isMenuOpen: isMenuOpen,\r\n            openMenu: () => setIsMenuOpen(true),\r\n            closeMenu: () => setIsMenuOpen(false),\r\n          }\r\n        );\r\n        return;\r\n      }\r\n\r\n      const menuItemsKeys = Object.keys(\r\n        tabsRef.current?.dropdownItems ?? {}\r\n      ).sort();\r\n\r\n      const focusedMenuItemIndex = menuItemsKeys.findIndex(\r\n        (key) => tabsRef.current?.dropdownItems[+key].tab.key === focusedTabId\r\n      );\r\n\r\n      const isMenuItemFocused = focusedMenuItemIndex !== -1;\r\n\r\n      if (isMenuItemFocused) {\r\n        handleDropdownMenuItemKeyDown(\r\n          e.code as KeyCode,\r\n          focusedMenuItemIndex,\r\n          maxTabIndex,\r\n          tabsRef.current,\r\n          () => setIsMenuOpen(false)\r\n        );\r\n        return;\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"keydown\", onKeydown);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", onKeydown);\r\n    };\r\n  }, [focusedTabId, tabsRef, isMenuOpen, setIsMenuOpen]);\r\n\r\n  return {\r\n    focusedTabId,\r\n    handlers,\r\n  };\r\n}\r\n\r\nfunction handleKeyDownOnTab(\r\n  keyCode: KeyCode,\r\n  focusedIndex: number,\r\n  maxTabIndex: number,\r\n  tabsInfo: TabsRef\r\n) {\r\n  const dropdownTabElement = tabsInfo.dropdownTab.element;\r\n\r\n  switch (keyCode) {\r\n    case KeyCode.ArrowLeft:\r\n      if (dropdownTabElement && focusedIndex === 0) {\r\n        dropdownTabElement?.focus();\r\n      } else {\r\n        tabsInfo.tabs[prevOrLast(focusedIndex, maxTabIndex)].element?.focus();\r\n      }\r\n      break;\r\n\r\n    case KeyCode.ArrowRight:\r\n      if (dropdownTabElement && focusedIndex === maxTabIndex) {\r\n        dropdownTabElement.focus();\r\n      } else {\r\n        tabsInfo.tabs[nextOrFirst(focusedIndex, maxTabIndex)].element?.focus();\r\n      }\r\n      break;\r\n\r\n    case KeyCode.Home:\r\n      tabsInfo.tabs[0]?.element?.focus();\r\n      break;\r\n\r\n    case KeyCode.End:\r\n      if (dropdownTabElement) {\r\n        dropdownTabElement?.focus();\r\n      } else {\r\n        tabsInfo.tabs[maxTabIndex]?.element?.focus();\r\n      }\r\n      break;\r\n\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nfunction handleDropdownMenuItemKeyDown(\r\n  keyCode: KeyCode,\r\n  focusedMenuItemIndex: number,\r\n  maxTabIndex: number,\r\n  tabsInfo: TabsRef,\r\n  closeMenu: () => void\r\n) {\r\n  const maxMenuItemIndex = Object.keys(tabsInfo.dropdownItems).length - 1;\r\n  switch (keyCode) {\r\n    case KeyCode.ArrowLeft:\r\n      tabsInfo.tabs[maxTabIndex]?.element?.focus();\r\n      closeMenu();\r\n      break;\r\n\r\n    case KeyCode.ArrowRight:\r\n      tabsInfo.tabs[0]?.element?.focus();\r\n      closeMenu();\r\n      break;\r\n\r\n    case KeyCode.ArrowUp:\r\n      {\r\n        const nextIndex = prevOrLast(focusedMenuItemIndex, maxMenuItemIndex);\r\n        tabsInfo.dropdownItems[nextIndex]?.element?.focus();\r\n      }\r\n      break;\r\n\r\n    case KeyCode.ArrowDown:\r\n      {\r\n        const nextIndex = nextOrFirst(focusedMenuItemIndex, maxMenuItemIndex);\r\n        tabsInfo.dropdownItems[nextIndex]?.element?.focus();\r\n      }\r\n      break;\r\n\r\n    case KeyCode.Home:\r\n      tabsInfo.dropdownItems[0]?.element?.focus();\r\n      break;\r\n\r\n    case KeyCode.End:\r\n      tabsInfo.dropdownItems[maxMenuItemIndex]?.element?.focus();\r\n      break;\r\n\r\n    case KeyCode.Escape:\r\n      tabsInfo.dropdownTab.element?.focus();\r\n      closeMenu();\r\n      break;\r\n\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nfunction handleDropdownTabKeydown(\r\n  keyCode: KeyCode,\r\n  maxTabIndex: number,\r\n  tabsInfo: TabsRef,\r\n  {\r\n    isMenuOpen,\r\n    closeMenu,\r\n    openMenu,\r\n  }: {\r\n    isMenuOpen: boolean;\r\n    closeMenu: () => void;\r\n    openMenu: () => void;\r\n  }\r\n) {\r\n  const menuItems = tabsInfo.dropdownItems;\r\n  const maxMenuItemIndex = Object.keys(menuItems).length - 1;\r\n\r\n  switch (keyCode) {\r\n    case KeyCode.ArrowLeft:\r\n      {\r\n        const tabElement = tabsInfo.tabs[maxTabIndex].element;\r\n        if (tabElement) {\r\n          tabElement.focus();\r\n          closeMenu();\r\n        }\r\n      }\r\n      break;\r\n\r\n    case KeyCode.ArrowRight:\r\n      {\r\n        const tabElement = tabsInfo.tabs[0]?.element;\r\n        if (tabElement) {\r\n          tabElement.focus();\r\n          closeMenu();\r\n        }\r\n      }\r\n      break;\r\n\r\n    case KeyCode.ArrowUp:\r\n      if (isMenuOpen) {\r\n        menuItems[maxMenuItemIndex].element?.focus();\r\n      } else {\r\n        openMenu();\r\n      }\r\n      break;\r\n\r\n    case KeyCode.ArrowDown:\r\n      if (isMenuOpen) {\r\n        menuItems[0].element?.focus();\r\n      } else {\r\n        openMenu();\r\n      }\r\n      break;\r\n\r\n    case KeyCode.Home:\r\n      tabsInfo.tabs[0].element?.focus();\r\n      closeMenu();\r\n      break;\r\n\r\n    case KeyCode.Escape:\r\n      closeMenu();\r\n      break;\r\n\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nexport default useKeyboardNavigation;\r\n","import React, { useCallback, useMemo, useRef, useState } from \"react\";\r\nimport TabComponent from \"./TabComponent\";\r\nimport DropdownTabComponent from \"../DropdownTab/DropdownTabComponent\";\r\nimport { Section, Tab, TabKey, TabsRef } from \"../types\";\r\nimport Slider from \"../Slider/Slider\";\r\nimport useSlider from \"./hooks/useSlider\";\r\nimport useKeyboardNavigation from \"./hooks/useKeyboardNavigation\";\r\nimport { DropdownTabContextProvider } from \"../DropdownTab/DropdownTabContext/DropdownTabContextProvider\";\r\nimport generateTabId from \"../utils/generateTabId\";\r\n\r\nconst DROPDOWN_TAB_KEY = Symbol();\r\n\r\nexport type TabsProps = {\r\n  tabs: Tab[];\r\n  sections: Section[];\r\n  onChange: (key: TabKey | null) => void;\r\n  onDropdownTabClose: (key: TabKey) => void;\r\n  activeKey?: TabKey | null;\r\n  defaultActiveKey?: TabKey;\r\n};\r\n\r\nfunction TabsComponent({\r\n  tabs,\r\n  sections,\r\n  onChange: onChangeProp,\r\n  onDropdownTabClose,\r\n  activeKey: activeKeyProp,\r\n  defaultActiveKey,\r\n}: TabsProps) {\r\n  const [activeKeyInner, setActiveKeyInner] = useState(() =>\r\n    activeKeyProp !== undefined ? activeKeyProp : defaultActiveKey ?? null\r\n  );\r\n\r\n  const onChange = useCallback(\r\n    (key: TabKey | null) => {\r\n      if (onChangeProp) {\r\n        onChangeProp(key);\r\n      }\r\n\r\n      setActiveKeyInner(key);\r\n    },\r\n    [onChangeProp]\r\n  );\r\n\r\n  const activeTabKey =\r\n    activeKeyProp !== undefined ? activeKeyProp : activeKeyInner;\r\n\r\n  const isDropdownTabDisplayed = useMemo(\r\n    () => sections.some((s) => s.tabs.length),\r\n    [sections]\r\n  );\r\n\r\n  const tabsRef = useRef<TabsRef>({\r\n    tabs: {},\r\n    container: null,\r\n    dropdownTab: {},\r\n    dropdownItems: {},\r\n  } as TabsRef);\r\n\r\n  const { sliderDisplayInfo, onDropdownTabWidthChange } = useSlider(\r\n    activeTabKey,\r\n    sections,\r\n    tabsRef\r\n  );\r\n\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n\r\n  const { focusedTabId, handlers } = useKeyboardNavigation({\r\n    tabsRef,\r\n    isMenuOpen,\r\n    setIsMenuOpen,\r\n  });\r\n\r\n  return (\r\n    <div\r\n      className=\"tabs\"\r\n      role=\"tablist\"\r\n      ref={(el) => {\r\n        tabsRef.current.container = el;\r\n      }}\r\n    >\r\n      {tabs.map((tab, index) => (\r\n        <TabComponent\r\n          key={tab.key}\r\n          id={generateTabId(tab)}\r\n          ref={(el) => {\r\n            if (!el) {\r\n              delete tabsRef.current.tabs[index];\r\n              return;\r\n            }\r\n\r\n            tabsRef.current.tabs[index] = {\r\n              element: el,\r\n              tab: tab,\r\n            };\r\n          }}\r\n          title={tab.title}\r\n          active={activeTabKey === tab.key}\r\n          onClick={() => onChange(tab.key)}\r\n          onBlur={handlers.onTabBlur}\r\n          onFocus={() => handlers.onTabFocus(tab)}\r\n        />\r\n      ))}\r\n\r\n      <DropdownTabContextProvider\r\n        menuItemRef={useCallback((el, tab, index) => {\r\n          if (!el) {\r\n            delete tabsRef.current.dropdownItems[index];\r\n            return;\r\n          }\r\n\r\n          tabsRef.current.dropdownItems[index] = {\r\n            tab: tab,\r\n            element: el,\r\n          };\r\n        }, [])}\r\n        onMenuItemFocus={handlers.onItemFocus}\r\n        focusedTabId={focusedTabId}\r\n        onCloseMenuItem={onDropdownTabClose}\r\n        onActivateMenuItem={useCallback(\r\n          (tabKey) => {\r\n            tabsRef.current.dropdownTab.element?.focus();\r\n            setIsMenuOpen(false);\r\n            onChange(tabKey);\r\n          },\r\n          [onChange]\r\n        )}\r\n      >\r\n        {isDropdownTabDisplayed && (\r\n          <DropdownTabComponent\r\n            ref={(el) => {\r\n              tabsRef.current.dropdownTab = {\r\n                id: DROPDOWN_TAB_KEY,\r\n                element: el,\r\n              };\r\n            }}\r\n            onFocus={(e) => {\r\n              handlers.onDropdownTabFocus(DROPDOWN_TAB_KEY, e);\r\n            }}\r\n            activeKey={activeTabKey}\r\n            onChange={onChange}\r\n            sections={sections}\r\n            defaultKey={defaultActiveKey}\r\n            onWidthChange={onDropdownTabWidthChange}\r\n            isMenuOpen={isMenuOpen}\r\n            setIsMenuOpen={setIsMenuOpen}\r\n          />\r\n        )}\r\n      </DropdownTabContextProvider>\r\n\r\n      {sliderDisplayInfo.isDisplayed && (\r\n        <Slider left={sliderDisplayInfo.left} width={sliderDisplayInfo.width} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TabsComponent;\r\n","import React from \"react\";\r\nimport useTabsContext from \"./Tabs/hooks/useTabsContext\";\r\nimport Tabs from \"./Tabs/Tabs/Tabs\";\r\n\r\nfunction TabsWithContext() {\r\n  const {\r\n    tabs,\r\n    sections,\r\n    activeKey,\r\n    setActiveKey,\r\n    onTabClose,\r\n  } = useTabsContext();\r\n\r\n  return (\r\n    <Tabs\r\n      activeKey={activeKey}\r\n      tabs={tabs}\r\n      sections={sections}\r\n      onChange={setActiveKey}\r\n      onDropdownTabClose={onTabClose}\r\n    />\r\n  );\r\n}\r\n\r\nexport default TabsWithContext;\r\n","import React, { PropsWithChildren } from \"react\";\r\n\r\nexport type TabContentProps = PropsWithChildren<{\r\n  tag?: keyof JSX.IntrinsicElements;\r\n}>;\r\n\r\nfunction TabContent({ children, tag = \"section\" }: TabContentProps) {\r\n  const TabContentContainer = tag;\r\n\r\n  return <TabContentContainer>{children}</TabContentContainer>;\r\n}\r\n\r\nexport default TabContent;\r\n","import React, { memo } from \"react\";\r\nimport bem from \"../../../helpers/bem\";\r\nimport { DropdownTab, Tab } from \"../types\";\r\nimport TabContent from \"./TabContent/TabContent\";\r\nimport generateTabId from \"../utils/generateTabId\";\r\n\r\nconst bemTabPane = bem(\"tab-pane\");\r\n\r\nexport type TabPaneProps = {\r\n  className?: string;\r\n  active: boolean;\r\n  tab: Tab | DropdownTab;\r\n};\r\n\r\nfunction TabPane({ className, active, tab }: TabPaneProps) {\r\n  return (\r\n    <div\r\n      className={bemTabPane({ active: active, hidden: !active }, [className])}\r\n      role=\"tabpanel\"\r\n      aria-hidden={!active}\r\n      aria-controls={generateTabId(tab)}\r\n    >\r\n      <TabContent>\r\n        {/* TODO: Tab.component and DropdownTab.component props */}\r\n        <p>Content of {tab.title}</p>\r\n      </TabContent>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default memo(TabPane);\r\n","import React, { useMemo, useEffect, useRef } from \"react\";\r\nimport TabPane from \"./TabPane\";\r\nimport useTabsContext from \"../hooks/useTabsContext\";\r\nimport { TabKey } from \"../types\";\r\nimport bem from \"../../../helpers/bem\";\r\n\r\nconst bemContainer = bem(\"tap-panes-container\");\r\n\r\nexport type TabPanesContainerProps = {\r\n  className?: string;\r\n  classNameInner?: string;\r\n};\r\n\r\nfunction TabPanesContainer({\r\n  className,\r\n  classNameInner,\r\n}: TabPanesContainerProps) {\r\n  const { tabs, sections, activeKey } = useTabsContext();\r\n\r\n  const flattenTabs = useMemo(() => {\r\n    let flatten = tabs ? [...tabs] : [];\r\n\r\n    flatten =\r\n      sections?.reduce?.((flatten, s) => {\r\n        if (s.tabs?.length) {\r\n          flatten.push(...s.tabs);\r\n        }\r\n\r\n        return flatten;\r\n      }, flatten) ?? flatten;\r\n\r\n    return flatten;\r\n  }, [tabs, sections]);\r\n\r\n  const prevActiveKey = useRef<TabKey | null>(null);\r\n\r\n  useEffect(() => {\r\n    prevActiveKey.current = activeKey;\r\n  }, [activeKey]);\r\n\r\n  const shift = useMemo(() => {\r\n    return flattenTabs.findIndex((t) => t.key === activeKey);\r\n  }, [flattenTabs, activeKey]);\r\n\r\n  return (\r\n    <div className={bemContainer(null, [className])}>\r\n      <div\r\n        className={bemContainer(\"inner\", null, [classNameInner])}\r\n        style={{ transform: `translateX(-${shift}00%)` }}\r\n      >\r\n        {flattenTabs.map((t) => (\r\n          <TabPane key={t.key} active={activeKey === t.key} tab={t} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TabPanesContainer;\r\n","import React, { useContext } from \"react\";\n\nimport { Section } from \"./components/Tabs/types\";\nimport {\n  TabsContext,\n  TabsContextProvider,\n} from \"./components/Tabs/TabsContext/TabsContext\";\nimport TabsWithContext from \"./components/TabsWithContext\";\nimport TabPanesContainer from \"./components/Tabs/TabPane/TabPanesContaner\";\nimport getDropdownTabByKey from \"./components/Tabs/utils/getDropdownTabByKey\";\n\nexport default function App() {\n  const tabs = [\n    {\n      key: \"0\",\n      title: \"OVERVIEW\",\n    },\n  ];\n\n  const sections: Section[] = [\n    {\n      key: \"s0\",\n      title: \"Active\",\n      tabs: [\n        {\n          key: \"dropdownTab0\",\n          title: \"Tab 0\",\n        },\n        {\n          key: \"dropdownTab1\",\n          title: \"Tab 2\",\n          locked: true,\n          starred: true,\n        },\n      ],\n    },\n    {\n      key: \"s1\",\n      title: new Array(4).fill(\"Long Section Title\").join(\" \"),\n      tabs: [\n        {\n          key: \"dropdownTab2\",\n          title: new Array(3).fill(\"Dropdown menu item 2\").join(\" \"),\n          starred: true,\n        },\n        {\n          key: \"dropdownTab3\",\n          title: \"Tab 3\",\n          locked: true,\n        },\n      ],\n    },\n    {\n      key: \"s2\",\n      title: \"Empty Section\",\n      tabs: [],\n    },\n  ];\n\n  return (\n    <TabsContextProvider\n      defaultActiveKey={\"0\"}\n      initialTabs={tabs}\n      initialSections={sections}\n    >\n      <main style={{ padding: 100 }}>\n        <TabsWithContext />\n        <TabPanesContainer />\n        <Buttons />\n      </main>\n    </TabsContextProvider>\n  );\n}\n\nlet newTabsCounter = 10;\nfunction Buttons() {\n  const {\n    activeKey,\n    setActiveKey,\n    toggleStar,\n    toggleLock,\n    sections,\n    closeDropdownTab,\n    addTabs,\n  } = useContext(TabsContext);\n\n  const onToggleStar = () => {\n    if (activeKey) {\n      toggleStar(activeKey);\n    }\n  };\n\n  const onToggleLock = () => {\n    if (activeKey) {\n      toggleLock(activeKey);\n    }\n  };\n\n  const onCloseDropdown = () => {\n    if (activeKey) {\n      closeDropdownTab(activeKey);\n    }\n  };\n\n  const isDropdownTab = !!getDropdownTabByKey(activeKey, sections)?.tab;\n\n  const onAdd = () => {\n    const key = `dropdownTab${newTabsCounter++}`;\n    addTabs({\n      dropdownTabs: {\n        s0: [\n          {\n            key: key,\n            title: \"New Tab\",\n          },\n        ],\n      },\n    });\n\n    setActiveKey(key);\n  };\n\n  return (\n    <div style={{ borderTop: \"1px solid\", marginTop: 24, padding: 8 }}>\n      <p>Dropdown tab actions</p>\n\n      <button disabled={!isDropdownTab} onClick={onToggleStar}>\n        Toggle Star\n      </button>\n      <button disabled={!isDropdownTab} onClick={onToggleLock}>\n        Toggle Lock\n      </button>\n      <button disabled={!isDropdownTab} onClick={onCloseDropdown}>\n        Close\n      </button>\n      <button onClick={onAdd}>Add</button>\n    </div>\n  );\n}\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport App from \"./App\";\r\nimport \"./styles.scss\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(<App />, rootElement);\r\n"],"sourceRoot":""}